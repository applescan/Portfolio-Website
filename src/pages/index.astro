---
import About from "../components/Sections/About";
import Profile from "../components/Sections/Profile";
import Layout from "../layouts/Layout.astro";
import type { AboutMe } from "../lib/contentful";
import { contentfulClient, type Hero } from "../lib/contentful";

const profile = await contentfulClient.getEntries<Hero>({
  content_type: "hero",
});

const about = await contentfulClient.getEntries<AboutMe>({
  content_type: "aboutMe",
});

const heroItem =
  profile.items.length > 0
    ? {
        title: profile.items[0].fields.title,
        desc: profile.items[0].fields.description,
        subTitle: profile.items[0].fields.subTitle,
      }
    : null;

const aboutItem =
  about.items.length > 0
    ? {
        title: about.items[0].fields.title,
        desc: about.items[0].fields.description,
      }
    : null;
---

<Layout title="Felicia's Portfolio Website">
  {
    heroItem && (
      <Profile
        title={heroItem.title}
        subTitle={heroItem.subTitle}
        desc={heroItem.desc}
      />
    )
  }
  {aboutItem && <About title={aboutItem.title} desc={aboutItem.desc} />}
</Layout>
